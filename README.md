# Homelab Server

Self-hosted —Å–µ—Ä–≤–µ—Ä –Ω–∞ Docker Compose –¥–ª—è –¥–æ–º–∞—à–Ω–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è. –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é, —Å–∫—Ä–∏–ø—Ç—ã –¥–µ–ø–ª–æ—è/–±—ç–∫–∞–ø–∞ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –¥–ª—è —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è –Ω–∞ miniPC.

## –°–µ—Ä–≤–∏—Å—ã

- **Traefik** ‚Äî reverse proxy —Å Docker auto-discovery –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º HTTPS (v3.6.7)

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Ubuntu Server 24.04 LTS –Ω–∞ miniPC
- Docker Engine + Docker Compose v2
- Restic (–¥–ª—è –±—ç–∫–∞–ø–æ–≤)

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

- **–ü—É—Ç—å —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ**: `/srv/homelab/homelab-server`
- **–î–∞–Ω–Ω—ã–µ —Å–µ—Ä–≤–∏—Å–æ–≤**: `/srv/data/<service>/`

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (–Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ)

```bash
# 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å/—Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
sudo mkdir -p /srv/homelab
cd /srv/homelab
# –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å repo –≤ /srv/homelab/homelab-server

# 2. –°–æ–∑–¥–∞—Ç—å .env –∏–∑ —à–∞–±–ª–æ–Ω–∞
cd /srv/homelab/homelab-server
cp compose/.env.example compose/.env
chmod 600 compose/.env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å compose/.env, –∑–∞–ø–æ–ª–Ω–∏–≤ —Å–µ–∫—Ä–µ—Ç—ã

# 3. –°–æ–∑–¥–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –¥–ª—è –¥–∞–Ω–Ω—ã—Ö
sudo mkdir -p /srv/data/{traefik,backup}

# 4. –ó–∞–ø—É—Å—Ç–∏—Ç—å –¥–µ–ø–ª–æ–π
./scripts/deploy.sh
```

## –í–∞–ª–∏–¥–∞—Ü–∏—è (–ª–æ–∫–∞–ª—å–Ω–æ)

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –±–µ–∑ –∑–∞–ø—É—Å–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
./scripts/validate.sh
```

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

–î–ª—è –≤–Ω–µ—Å–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å–º. [`DEVELOPMENT.md`](DEVELOPMENT.md) ‚Äî workflow, code style, testing.

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `docs/`:

- `00_architecture.md` ‚Äî –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- `01_repo_overview.md` ‚Äî –æ–±–∑–æ—Ä —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
- `02_server_bootstrap.md` ‚Äî bootstrap –û–° –Ω–∞ miniPC
- `03_deploy.md` ‚Äî –¥–µ–ø–ª–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä
- `04_backup_restore.md` ‚Äî –±—ç–∫–∞–ø –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ
- `05_operations.md` ‚Äî –æ–ø–µ—Ä–∞—Ü–∏–∏ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è
- `06_troubleshooting.md` ‚Äî —Ä–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º
- `07_adding_services.md` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- `08_security.md` ‚Äî security guidelines

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –°–µ–∫—Ä–µ—Ç—ã –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç—è—Ç—Å—è –≤ git
- –í—Å–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ `compose/.env` (—Å–æ–∑–¥–∞—ë—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ)
- –ë—ç–∫–∞–ø—ã —à–∏—Ñ—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ Restic
- –°–µ—Ä–≤–∏—Å—ã –¥–æ—Å—Ç—É–ø–Ω—ã —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ reverse proxy

## Todo
plans/todo.md
üî• –ö—Ä–∏—Ç–∏—á–Ω–æ (—Å–¥–µ–ª–∞—Ç—å —Å—Ä–æ—á–Ω–æ)

1. –î–æ–±–∞–≤–∏—Ç—å HTTPS (–ø—Ä–æ–±–ª–µ–º–∞ #1)
2. –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å Filebrowser (–ø—Ä–æ–±–ª–µ–º–∞ #2)
3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –±—ç–∫–∞–ø–æ–≤ (–ø—Ä–æ–±–ª–µ–º–∞ #4)
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å .env –≤ password manager (–ø—Ä–æ–±–ª–µ–º–∞ #3)

‚ö° –í–∞–∂–Ω–æ (–≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è)

5. –î–æ–±–∞–≤–∏—Ç—å resource limits (–ø—Ä–æ–±–ª–µ–º–∞ #5)
6. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∏—Å–∫–∞ (–ø—Ä–æ–±–ª–µ–º–∞ #9)
7. –î–æ–±–∞–≤–∏—Ç—å auth –¥–ª—è —Å–µ—Ä–≤–∏—Å–æ–≤ (–±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–æ –ø—Ä–∏ –≤–æ–∑–≤—Ä–∞—Ç–µ —Å–µ—Ä–≤–∏—Å–æ–≤)

üìã –ñ–µ–ª–∞—Ç–µ–ª—å–Ω–æ (–≤ –ø–ª–∞–Ω–∞—Ö)

9. –î–æ–±–∞–≤–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ (–ø—Ä–æ–±–ª–µ–º–∞ #6)
10. –†–∞–∑–¥–µ–ª–∏—Ç—å —Å–µ—Ç–∏ (–ø—Ä–æ–±–ª–µ–º–∞ #11)
11. –î–æ–±–∞–≤–∏—Ç—å rate limiting (–ø—Ä–æ–±–ª–µ–º–∞ #15)
12. –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å restore-test (–ø—Ä–æ–±–ª–µ–º–∞ #24)

---
üéÅ –ë–æ–Ω—É—Å: —á—Ç–æ –º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å

1. –î–æ–±–∞–≤–∏—Ç—å Prometheus + Grafana –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
2. –î–æ–±–∞–≤–∏—Ç—å fail2ban –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç brute-force
3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å secrets management (Docker Secrets, Vault, etc.)
4. –î–æ–±–∞–≤–∏—Ç—å pre-commit hooks –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–µ–∫—Ä–µ—Ç–æ–≤
5. –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å ansible –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ bootstrap
6. –î–æ–±–∞–≤–∏—Ç—å CI/CD pipeline –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
7. –î–æ–±–∞–≤–∏—Ç—å VPN (WireGuard) –¥–ª—è —É–¥–∞–ª—ë–Ω–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
8. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ (Loki, ELK)
9. –î–æ–±–∞–≤–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∏–∑ –∫–æ–Ω—Ñ–∏–≥–æ–≤


## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT
