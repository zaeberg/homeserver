# =============================================================================
# Homeserver Environment Configuration
# =============================================================================
# Шаблон файла переменных окружения. Скопируйте и заполните:
#   cp compose/.env.example compose/.env
#   chmod 600 compose/.env
# ⚠️ ВАЖНО: Никогда не коммитьте .env файл в git!
# =============================================================================

# -----------------------------------------------------------------------------
# Базовая конфигурация
# -----------------------------------------------------------------------------

# Базовый URL для доступа к сервисам (обязательный)
# Формат: http://hostname или http://IP
# Примеры: http://home.local, http://192.168.1.100, http://homeserver.lan
BASE_URL=http://home.local

# -----------------------------------------------------------------------------
# Restic Backup Configuration
# -----------------------------------------------------------------------------
# Restic — дедуплицированные бэкапы с шифрованием.
# См. docs/04_backup_restore.md для подробной настройки.
# -----------------------------------------------------------------------------

# ⚠️ КРИТИЧНО: Пароль для шифрования бэкапов (ОБЯЗАТЕЛЬНЫЙ!)
# Сохраните в надёжном месте (password manager)! БЕЗ ПАРОЛЯ ВОССТАНОВЛЕНИЕ НЕВОЗМОЖНО!
# Минимум 12 символов (рекомендуется 20+)
# Генерация: openssl rand -base64 24
RESTIC_PASSWORD=CHANGE_THIS_TO_SECURE_PASSWORD

# Локальный репозиторий (ОПЦИОНАЛЬНЫЙ)
# Путь к локальному backup disk (внешний HDD, NAS, etc.)
# Примеры: /mnt/backup/restic, /mnt/nas/homeserver/restic
# Требуется: disk должен быть смонтирован перед запуском backup.sh
RESTIC_REPO_LOCAL=/mnt/backup/restic

# Облачный репозиторий (ОПЦИОНАЛЬНЫЙ)
# Облачное хранилище через rclone (Яндекс Диск, Google Drive, Dropbox, etc.)
# Формат: rclone:<remote>:<path>
# Настройка: rclone config (см. https://rclone.org/)
# Примеры: rclone:yandex:homelab-backups, rclone:gdrive:backups
RESTIC_REPO_CLOUD=rclone:yandex:homelab-backups

# -----------------------------------------------------------------------------
# Additional Backup Settings
# -----------------------------------------------------------------------------

# Что бэкапить (ОБЯЗАТЕЛЬНЫЙ)
# Путь(и) к файлам и директориям, разделённые пробелами.
# Используйте кавычки если путей несколько!
# Примеры:
#   /srv/homelab/homelab-server                              (только конфиги)
#   "/srv/homelab/homelab-server /srv/data/nginx"            (конфиги + данные)
#   "/srv/homelab/homelab-server /srv/data/*"                (конфиги + ВСЕ данные)
#   "/srv/homelab/homelab-server /srv/data/glances"          (конфиги + данные Glances)
BACKUP_TARGETS="/srv/homelab/homelab-server"

# Retention Policy (ОПЦИОНАЛЬНЫЙ)
# Политика удержания старых бэкапов.
# По умолчанию: --keep-daily 7 --keep-weekly 4 --keep-monthly 6
# Пример: RESTIC_RETENTION=--keep-daily 14 --keep-weekly 8 --keep-monthly 12
# RESTIC_RETENTION=--keep-daily 7 --keep-weekly 4 --keep-monthly 6

# =============================================================================
# Проверка конфигурации
# =============================================================================
# После заполнения .env проверьте:
#   ls -la compose/.env                    # файл существует
#   chmod 600 compose/.env                 # права 600
#   ./scripts/validate.sh                  # валидация
#   ./scripts/backup.sh local              # тест бэкапа
# =============================================================================
